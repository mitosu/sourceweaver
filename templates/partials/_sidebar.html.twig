<nav id="sidebar" class="sidebar position-fixed top-0 start-0 h-100">
    <div class="d-flex flex-column justify-content-between h-100 px-3">
        <div>
            <h5 class="text-white mb-4 sidebar-title" style="margin-top: 15px;">Sourceweaver</h5>
            <ul class="nav flex-column">
                <li class="nav-item">
                    <a class="nav-link {{ app.request.get('_route') == 'dashboard' ? 'active' : '' }}" href="{{ path('dashboard') }}">
                        <i class="bi bi-house-door me-2"></i>
                        <span class="sidebar-label">Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {{ app.request.get('_route') starts with 'investigation' ? 'active' : '' }}" href="{{ path('investigation_index') }}">
                        <i class="bi bi-search me-2"></i>
                        <span class="sidebar-label">Investigaciones</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {{ app.request.get('_route') starts with 'api_configuration' ? 'active' : '' }}" href="{{ path('api_configuration_index') }}">
                        <i class="bi bi-cloud-upload me-2"></i>
                        <span class="sidebar-label">APIs OSINT</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {{ app.request.get('_route') starts with 'workspace' ? 'active' : '' }}" href="{{ path('workspace_index') }}">
                        <i class="bi bi-person-workspace me-2"></i>
                        <span class="sidebar-label">Workspaces</span>
                    </a>
                </li>
                {% for ws in workspaces %}
                    {% set workspaceId = ws.id is defined ? ws.id : ws %}
                    <li class="nav-item">
                        <a class="nav-link {{ app.request.get('_route') == 'workspace_show' and app.request.get('id') == workspaceId ? 'active' : '' }}" href="{{ path('workspace_show', {id: workspaceId}) }}">
                            <i class="bi bi-folder2 me-2"></i>
                            <span class="sidebar-label">{{ ws.name is defined ? ws.name : 'Workspace' }}</span>
                        </a>
                    </li>
                {% endfor %}
            </ul>
        </div>

        <div class="mt-4">
            <a class="btn btn-outline-light w-100" href="{{ path('app_logout') }}" style="margin-bottom: 15px;">
                <i class="bi bi-box-arrow-left me-2"></i>
                <span class="sidebar-label">Salir</span>
            </a>
        </div>
    </div>
</nav>
