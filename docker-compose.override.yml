version: '3.8'

services:
  python-osint:
    build:
      context: ./python-osint
      dockerfile: Dockerfile
    container_name: sourceweaver_python_osint
    ports:
      - "8001:8001"
    volumes:
      - ./python-osint/scripts:/app/scripts
      - ./python-osint/logs:/app/logs
    environment:
      - PYTHONPATH=/app
      - VIRUSTOTAL_API_KEY=4bc5fc8d63072ee5b0b0e35229af81589eb453fd3ef510356a09cc0192d1c930
      - ABUSEIPDB_API_KEY=your_abuseipdb_api_key_here
      - URLVOID_API_KEY=your_urlvoid_api_key_here
      - URLVOID_IDENTIFIER=your_urlvoid_identifier_here
      - SHODAN_API_KEY=your_shodan_api_key_here
      - API_TITLE=OSINT Analysis API
      - API_VERSION=1.0.0
      - DEBUG=false
      - LOG_LEVEL=INFO
      - HOST=0.0.0.0
      - PORT=8001
      - WORKERS=1
      - DEFAULT_TIMEOUT=120
      - MAX_CONCURRENT_ANALYSES=10
      - ENABLE_ASYNC_ANALYSIS=true
      - SCRIPTS_PATH=/app/scripts
      - LOGS_PATH=/app/logs
      - TEMP_PATH=/tmp/osint
      - ENABLE_METRICS=true
    networks:
      - symfony
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8001/health"]
      interval: 30s
      timeout: 10s
      retries: 3

networks:
  symfony: